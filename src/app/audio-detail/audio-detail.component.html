<div class="audio">

  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner"></div>
    <p>Loading audio...</p>
  </div>

  <div *ngIf="selectedAudio && !isLoading && !hasError" class="audio-player" #audioPlayerContainer>
    <div class="audio-card-detail">
      <div class="audio-card-detail-container">
        <img class="audio-card-detail__thumbnail" [src]="selectedAudio.thumbnailUrl" [alt]="selectedAudio.topic">
      <div class="audio-card-detail__info">
        <div class="audio-card-detail__meta-tags">
          <span *ngFor="let tag of selectedAudio.tags">{{ tag }}</span>
        </div>
        <div class="audio-card-detail__info-head">
          <h3 class="heading-tertiary">{{ selectedAudio.topic }}</h3>
          <a [routerLink]="['/speakers', 'moulanasiraj']" class="speaker">by {{ selectedAudio.speakerName }}</a>
        </div>
      </div>
      <audio #audioRef>
        Your browser does not support the audio element.
      </audio>
      <div class="controls">
        <div class="controls__progress-container">
          <input 
          class="controls__progress-container__slider"
          type="range" 
          min="0"
          [value]="currentTime"
          [max]="duration || 100"
          step="0.1"
          (input)="onSliderInput($event)"
          (input)="onSliderChange($event)"/>
          <div class="controls__time-container">
            <span>{{ formatTime(currentTime) }}</span>
            <span>{{ formatTime(duration) }}</span>
        </div>
        </div>
        <div class="controls__btns">
          <div class="controls__btns-row">
            <button class="ctrl-btn" (click)="seek(-10)">
              <svg class="svg-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="Replay-10-Fill--Streamline-Remix-Fill" height="16" width="16">
                <path d="M8 1.3333333333333333c3.6818666666666666 0 6.666666666666666 2.9847666666666663 6.666666666666666 6.666666666666666 0 3.6818666666666666 -2.9848 6.666666666666666 -6.666666666666666 6.666666666666666 -3.6818999999999997 0 -6.666666666666666 -2.9848 -6.666666666666666 -6.666666666666666h1.3333333333333333c0 2.9455333333333336 2.387813333333333 5.333333333333333 5.333333333333333 5.333333333333333 2.9455333333333336 0 5.333333333333333 -2.3878 5.333333333333333 -5.333333333333333 0 -2.94552 -2.3878 -5.333333333333333 -5.333333333333333 -5.333333333333333 -1.6425733333333332 0 -3.1117133333333333 0.7425533333333334 -4.0900533333333335 1.9102866666666665L5.333333333333333 6H1.3333333333333333V2l1.6310399999999998 1.6309866666666668C4.18668 2.223393333333333 5.9894 1.3333333333333333 8 1.3333333333333333Zm1.6666666666666665 4.166666666666666c-0.9204666666666667 0 -1.6666666666666665 0.7461933333333333 -1.6666666666666665 1.6666666666666665v1.6666666666666665c0 0.9204666666666667 0.7462 1.6666666666666665 1.6666666666666665 1.6666666666666665s1.6666666666666665 -0.7462 1.6666666666666665 -1.6666666666666665v-1.6666666666666665c0 -0.9204733333333334 -0.7462 -1.6666666666666665 -1.6666666666666665 -1.6666666666666665Zm0.6666666666666666 1.6666666666666665v1.6666666666666665c0 0.36819999999999997 -0.29846666666666666 0.6666666666666666 -0.6666666666666666 0.6666666666666666s-0.6666666666666666 -0.29846666666666666 -0.6666666666666666 -0.6666666666666666v-1.6666666666666665c0 -0.36819999999999997 0.29846666666666666 -0.6666666666666666 0.6666666666666666 -0.6666666666666666s0.6666666666666666 0.29846666666666666 0.6666666666666666 0.6666666666666666ZM6.666666666666666 5.666666666666666H5.666666666666666v4.666666666666666H6.666666666666666v-4.666666666666666Z" stroke-width="0.6667"></path>
              </svg>
            </button>

            <button class="ctrl-btn ctrl-btn-round">
              <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="Backward--Streamline-Font-Awesome" height="16" width="16">
                <path d="M14.359375 13.76875c0.296875 0.246875 0.7125 0.303125 1.065625 0.1375s0.575 -0.51875 0.575 -0.90625V3c0 -0.3875 -0.225 -0.740625 -0.575 -0.90625s-0.765625 -0.1125 -1.065625 0.1375L9 6.696875v2.60625l5.359375 4.465625zM8 11V3c0 -0.3875 -0.225 -0.740625 -0.575 -0.90625s-0.765625 -0.1125 -1.065625 0.1375l-6 5C0.13125 7.421875 0 7.703125 0 8s0.13125 0.578125 0.359375 0.76875l6 5c0.296875 0.246875 0.7125 0.303125 1.065625 0.1375s0.575 -0.51875 0.575 -0.90625v-2z" stroke-width="0.0313"></path>
              </svg>
            </button>

            <button class="ctrl-btn ctrl-btn-round ctrl-btn-big" (click)="togglePlayPause()">

              <svg class="svg-icon" *ngIf="!isPlaying" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="Play--Streamline-Font-Awesome" height="16" width="16">
                <path d="M3.8357374999999996 0.406975c-0.5179083333333333 -0.3184458333333333 -1.1687958333333333 -0.32894166666666663 -1.6971999999999998 -0.031495833333333334S1.2811875 1.2328291666666666 1.2811875 1.8417208333333335V14.159541666666666c0 0.6088916666666666 0.32894166666666663 1.1687958333333333 0.85735 1.4662416666666664s1.1792916666666666 0.28345 1.6971999999999998 -0.031495833333333334l10.078216666666666 -6.158908333333333c0.5004124999999999 -0.3044458333333333 0.8048583333333333 -0.84685 0.8048583333333333 -1.4347458333333334s-0.3044458333333333 -1.1268041666666666 -0.8048583333333333 -1.4347458333333334L3.8357374999999996 0.406975Z" stroke-width="0.0417"></path>
              </svg>
  
              <svg class="svg-icon" *ngIf="isPlaying" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="Pause--Streamline-Font-Awesome" height="16" width="16">
                <path d="M3.426665 0.16000000000000003c-1.0820800000000002 0 -1.9600000000000002 0.877915 -1.9600000000000002 1.9600000000000002v11.76c0 1.082085 0.87792 1.9600000000000002 1.9600000000000002 1.9600000000000002h1.3066700000000002c1.0820800000000002 0 1.9600000000000002 -0.877915 1.9600000000000002 -1.9600000000000002V2.12c0 -1.082085 -0.87792 -1.9600000000000002 -1.9600000000000002 -1.9600000000000002H3.426665Zm7.840000000000001 0c-1.0820800000000002 0 -1.9600000000000002 0.877915 -1.9600000000000002 1.9600000000000002v11.76c0 1.082085 0.87792 1.9600000000000002 1.9600000000000002 1.9600000000000002h1.3066700000000002c1.0820800000000002 0 1.9600000000000002 -0.877915 1.9600000000000002 -1.9600000000000002V2.12c0 -1.082085 -0.87792 -1.9600000000000002 -1.9600000000000002 -1.9600000000000002h-1.3066700000000002Z" stroke-width="0.05"></path>
              </svg>
            </button>

            <button class="ctrl-btn ctrl-btn-round">
              <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="Forward--Streamline-Font-Awesome" height="16" width="16">
                <path d="M1.640625 13.76875c-0.296875 0.246875 -0.7125 0.303125 -1.065625 0.1375S0 13.3875 0 13V3c0 -0.3875 0.225 -0.740625 0.575 -0.90625s0.765625 -0.1125 1.065625 0.1375L7 6.696875v2.60625L1.640625 13.76875zM8 11V3c0 -0.3875 0.225 -0.740625 0.575 -0.90625s0.765625 -0.1125 1.065625 0.1375l6 5c0.228125 0.190625 0.359375 0.471875 0.359375 0.76875s-0.13125 0.578125 -0.359375 0.76875l-6 5c-0.296875 0.246875 -0.7125 0.303125 -1.065625 0.1375S8 13.3875 8 13v-2z" stroke-width="0.0313"></path>
              </svg>
            </button>
  
            <button class="ctrl-btn" (click)="seek(10)">
              <svg class="svg-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="Forward-10-Fill--Streamline-Remix-Fill" height="16" width="16">
                <path d="M8 1.3333333333333333C4.318099999999999 1.3333333333333333 1.3333333333333333 4.318099999999999 1.3333333333333333 8c0 3.6818666666666666 2.9847666666666663 6.666666666666666 6.666666666666666 6.666666666666666 3.6818666666666666 0 6.666666666666666 -2.9848 6.666666666666666 -6.666666666666666h-1.3333333333333333c0 2.9455333333333336 -2.3878 5.333333333333333 -5.333333333333333 5.333333333333333 -2.94552 0 -5.333333333333333 -2.3878 -5.333333333333333 -5.333333333333333 0 -2.94552 2.387813333333333 -5.333333333333333 5.333333333333333 -5.333333333333333 1.6426 0 3.1117333333333335 0.7425533333333334 4.090066666666667 1.9102866666666665l-1.3311333333333333 1.3308133333333334C10.4664 5.6537533333333325 10.084466666666666 5.5 9.666666666666666 5.5c-0.9204666666666667 0 -1.6666666666666665 0.7461933333333333 -1.6666666666666665 1.6666666666666665v1.6666666666666665c0 0.9204666666666667 0.7462 1.6666666666666665 1.6666666666666665 1.6666666666666665s1.6666666666666665 -0.7462 1.6666666666666665 -1.6666666666666665v-1.6666666666666665c0 -0.45426666666666665 -0.18173333333333333 -0.86604 -0.4764 -1.1666666666666665H14.666666666666666V2l-1.6310666666666667 1.6309866666666668C11.813333333333333 2.223393333333333 10.0106 1.3333333333333333 8 1.3333333333333333Zm2.333333333333333 5.833333333333333v1.6666666666666665c0 0.36819999999999997 -0.29846666666666666 0.6666666666666666 -0.6666666666666666 0.6666666666666666s-0.6666666666666666 -0.29846666666666666 -0.6666666666666666 -0.6666666666666666v-1.6666666666666665c0 -0.36819999999999997 0.29846666666666666 -0.6666666666666666 0.6666666666666666 -0.6666666666666666s0.6666666666666666 0.29846666666666666 0.6666666666666666 0.6666666666666666ZM6.666666666666666 5.666666666666666H5.666666666666666v4.666666666666666H6.666666666666666v-4.666666666666666Z" stroke-width="0.6667"></path>
              </svg>
            </button>

          </div>

          <div class="controls__btns-row">
            <button class="ctrl-btn" (click)="toggleRepeat()">
              <svg class="svg-icon" [ngClass]="[isRepeat ? 'toggleActive' : '']" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="Repeat--Streamline-Unicons" height="16" width="16">
                <path d="M3.6666666666666665 11.666666666666666H2.6666666666666665v-7.333333333333333h5.199999999999999l-0.5333333333333333 0.5333333333333333c-0.13333333333333333 0.13333333333333333 -0.19999999999999998 0.26666666666666666 -0.19999999999999998 0.4666666666666666 0 0.39999999999999997 0.26666666666666666 0.6666666666666666 0.6666666666666666 0.6666666666666666 0.19999999999999998 0 0.3333333333333333 -0.06666666666666667 0.4666666666666666 -0.19999999999999998l1.6666666666666665 -1.6666666666666665c0.26666666666666666 -0.26666666666666666 0.26666666666666666 -0.6666666666666666 0 -0.9333333333333332l-1.6666666666666665 -1.6666666666666665c-0.26666666666666666 -0.26666666666666666 -0.6666666666666666 -0.26666666666666666 -0.9333333333333332 0 -0.26666666666666666 0.26666666666666666 -0.26666666666666666 0.6666666666666666 0 0.9333333333333332l0.5333333333333333 0.5333333333333333H2c-0.39999999999999997 0 -0.6666666666666666 0.26666666666666666 -0.6666666666666666 0.6666666666666666v8.666666666666666c0 0.39999999999999997 0.26666666666666666 0.6666666666666666 0.6666666666666666 0.6666666666666666h1.6666666666666665c0.39999999999999997 0 0.6666666666666666 -0.26666666666666666 0.6666666666666666 -0.6666666666666666s-0.26666666666666666 -0.6666666666666666 -0.6666666666666666 -0.6666666666666666ZM14 3h-1.6666666666666665c-0.39999999999999997 0 -0.6666666666666666 0.26666666666666666 -0.6666666666666666 0.6666666666666666s0.26666666666666666 0.6666666666666666 0.6666666666666666 0.6666666666666666H13.333333333333332v7.333333333333333h-5.6l0.5333333333333333 -0.5333333333333333c0.26666666666666666 -0.26666666666666666 0.26666666666666666 -0.6666666666666666 0 -0.9333333333333332 -0.26666666666666666 -0.26666666666666666 -0.6666666666666666 -0.26666666666666666 -0.9333333333333332 0l-1.6666666666666665 1.6666666666666665c-0.26666666666666666 0.26666666666666666 -0.26666666666666666 0.6666666666666666 0 0.9333333333333332l1.6666666666666665 1.6666666666666665c0.13333333333333333 0.13333333333333333 0.26666666666666666 0.19999999999999998 0.4666666666666666 0.19999999999999998 0.19999999999999998 0 0.3333333333333333 -0.06666666666666667 0.4666666666666666 -0.19999999999999998 0.26666666666666666 -0.26666666666666666 0.26666666666666666 -0.6666666666666666 0 -0.9333333333333332l-0.5333333333333333 -0.5333333333333333H14c0.39999999999999997 0 0.6666666666666666 -0.26666666666666666 0.6666666666666666 -0.6666666666666666v-8.666666666666666c0 -0.39999999999999997 -0.26666666666666666 -0.6666666666666666 -0.6666666666666666 -0.6666666666666666Z" stroke-width="0.6667"></path>
              </svg>
            </button>

            <button class="ctrl-btn">
              <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="Shuffle-Angular-Fill--Streamline-Phosphor-Fill" height="16" width="16">
                <path d="M15.66968125 11.65420625c0.22709375 0.2268375 0.22709375 0.59488125 0 0.821725l-1.74216875 1.74216875c-0.31593125 0.31628125 -0.855775 0.17195625 -0.97171875 -0.2597875 -0.01323125 -0.04926875 -0.0199125 -0.1000625 -0.01986875 -0.151075v-1.16144375h-2.32289375c-0.18755625 0.00000625 -0.36355 -0.09056875 -0.47256875 -0.24318125L4.50671875 4.51565625H0.740725C0.29368125 4.5156375 0.014275 4.0316875 0.2378125 3.64455c0.1037375 -0.17965625 0.29545625 -0.29033125 0.5029125 -0.2903375h4.0650625c0.18755625 -0.0000125 0.36355 0.0905625 0.47256875 0.243175l5.63374375 7.88695625h2.023825v-1.16145c-0.00035 -0.4470375 0.4833625 -0.72681875 0.8706875 -0.50360625 0.0442 0.025475 0.08485 0.05665625 0.1209 0.09274375Zm-6.8714125 -5.17860625c0.2609875 0.18643125 0.6236875 0.125975 0.81010625 -0.13501875l1.30663125 -1.82346875h2.02091875v1.15999375c-0.00035 0.4470375 0.4833625 0.72681875 0.8706875 0.50360625 0.0442 -0.025475 0.08485 -0.05665625 0.1209 -0.09274375l1.74216875 -1.742175c0.22709375 -0.2268375 0.22709375 -0.59488125 0 -0.821725l-1.74216875 -1.74216875c-0.31593125 -0.31628125 -0.855775 -0.17195625 -0.97171875 0.2597875 -0.01323125 0.04926875 -0.0199125 0.1000625 -0.01986875 0.151075v1.16145h-2.32289375c-0.18755625 -0.0000125 -0.36355 0.0905625 -0.47256875 0.243175l-1.4764875 2.06665c-0.187575 0.2610625 -0.127375 0.6248375 0.13429375 0.8115625Zm-2.17771875 3.0488c-0.2609875 -0.18643125 -0.6236875 -0.125975 -0.81010625 0.13501875l-1.303725 1.824925H0.740725c-0.44704375 0.00001875 -0.72645 0.48396875 -0.5029125 0.87110625 0.10374375 0.1796625 0.29545 0.29034375 0.5029125 0.29034375h4.0650625c0.18755625 0.00000625 0.36355 -0.09056875 0.47256875 -0.24318125l1.4764875 -2.06665c0.187575 -0.2610625 0.127375 -0.6248375 -0.13429375 -0.8115625Z" stroke-width="0.0625"></path>
              </svg>
            </button>

            <div class="speed-control">
              <button class="ctrl-btn speed-btn" (click)="toggleSpeedMenu()">
                <svg class="svg-icon" [ngClass]="{'toggleActive': showSpeedMenu}" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="Playback-Speed--Streamline-Solar" height="24" width="24">
                  <path d="M9.60751 1.51737C10.3776 1.34229 11.1785 1.25 12 1.25c5.9371 0 10.75 4.81294 10.75 10.75 0 5.9371 -4.8129 10.75 -10.75 10.75 -0.8215 0 -1.6224 -0.0923 -2.39249 -0.2674 -0.40391 -0.0918 -0.6569 -0.4937 -0.56507 -0.8976 0.09183 -0.4039 0.4937 -0.6569 0.89761 -0.565 0.66175 0.1504 1.35105 0.23 2.05995 0.23 5.1086 0 9.25 -4.1414 9.25 -9.25 0 -5.10863 -4.1414 -9.25 -9.25 -9.25 -0.7089 0 -1.3982 0.0796 -2.05995 0.23004 -0.40391 0.09183 -0.80578 -0.16116 -0.89761 -0.56507 -0.09183 -0.40391 0.16116 -0.80578 0.56507 -0.8976Z" stroke-width="1"></path>
                  <path d="M7.31372 3.13198c0.22071 0.35052 0.11547 0.81359 -0.23504 1.03429 -1.17519 0.73996 -2.17245 1.73722 -2.91241 2.91241 -0.22071 0.35051 -0.68377 0.45575 -1.03429 0.23504 -0.35052 -0.2207 -0.45575 -0.68377 -0.23505 -1.03428 0.85953 -1.36508 2.01743 -2.52298 3.3825 -3.38251 0.35052 -0.2207 0.81359 -0.11547 1.03429 0.23505Z" stroke-width="1"></path>
                  <path d="M2.98004 9.94005c0.09183 -0.40391 -0.16116 -0.80578 -0.56507 -0.89761 -0.40391 -0.09183 -0.80578 0.16116 -0.8976 0.56507C1.34229 10.3776 1.25 11.1785 1.25 12c0 0.8215 0.09229 1.6224 0.26737 2.3925 0.09182 0.4039 0.49369 0.6569 0.8976 0.5651 0.40391 -0.0919 0.6569 -0.4937 0.56507 -0.8976C2.8296 13.3982 2.75 12.7089 2.75 12c0 -0.7089 0.0796 -1.3982 0.23004 -2.05995Z" stroke-width="1"></path>
                  <path d="M3.13198 16.6863c0.35052 -0.2207 0.81359 -0.1155 1.03429 0.235 0.73996 1.1752 1.73722 2.1725 2.91241 2.9124 0.35051 0.2207 0.45575 0.6838 0.23504 1.0343 -0.2207 0.3505 -0.68377 0.4558 -1.03428 0.2351 -1.36508 -0.8596 -2.52298 -2.0175 -3.38251 -3.3825 -0.2207 -0.3506 -0.11547 -0.8136 0.23505 -1.0343Z" stroke-width="1"></path>
                  <path d="M15.4137 10.941c0.7817 0.4616 0.7817 1.6564 0 2.118l-4.7202 2.7868C9.93371 16.2944 9 15.7105 9 14.7868V9.21316c0 -0.92369 0.93371 -1.50755 1.6935 -1.05897l4.7202 2.78681Z" stroke-width="1"></path>
                </svg>
              </button>
              <div #dropdown *ngIf="showSpeedMenu" class="speed-dropdown" [ngClass]="{'show': showSpeedMenu}">
                <div class="speed-option" 
                [ngClass]="{'selected': speed === selectedSpeed}"
                (click)="selectSpeed(speed)"
                *ngFor="let speed of speedOptions">{{ speed }}</div>
              </div>
            </div>
          </div>

        </div>
      </div>
      <div class="share-btn">
        <button class="ctrl-btn" (click)="shareAudio()">
          <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="Ios-Share-Fill--Streamline-Rounded-Fill-Material" height="24" width="24">
            <path d="M5.5 23.00005c-0.4 0 -0.75 -0.15 -1.05 -0.45 -0.3 -0.3 -0.45 -0.65 -0.45 -1.05v-12.725c0 -0.4 0.15 -0.75 0.45 -1.05 0.3 -0.3 0.65 -0.45 1.05 -0.45h3.475c0.2125 0 0.39065 0.07235 0.5345 0.217 0.14365 0.1445 0.2155 0.32365 0.2155 0.5375 0 0.21365 -0.07185 0.39135 -0.2155 0.533 -0.14385 0.14165 -0.322 0.2125 -0.5345 0.2125H5.5v12.725h13v-12.725h-3.525c-0.2125 0 -0.3906 -0.07235 -0.53425 -0.217 -0.14385 -0.1445 -0.21575 -0.32365 -0.21575 -0.5375 0 -0.21365 0.0719 -0.39135 0.21575 -0.533 0.14365 -0.14165 0.32175 -0.2125 0.53425 -0.2125H18.5c0.4 0 0.75 0.15 1.05 0.45 0.3 0.3 0.45 0.65 0.45 1.05v12.725c0 0.4 -0.15 0.75 -0.45 1.05 -0.3 0.3 -0.65 0.45 -1.05 0.45H5.5Zm5.725 -19.1 -1.675 1.675c-0.15 0.15 -0.325 0.225 -0.525 0.225s-0.37825 -0.075 -0.53475 -0.225c-0.1435 -0.15 -0.21525 -0.32915 -0.21525 -0.5375 0 -0.208335 0.075 -0.3875 0.225 -0.5375l2.95 -2.975c0.15 -0.15 0.325 -0.225 0.525 -0.225s0.375 0.075 0.525 0.225l2.975 2.975c0.15 0.15 0.225 0.32633 0.225 0.529 0 0.20265 -0.07175 0.37765 -0.21525 0.525 -0.1565 0.14735 -0.33865 0.221 -0.5465 0.221 -0.20765 0 -0.3871 -0.075 -0.53825 -0.225l-1.675 -1.65v10.675c0 0.2125 -0.07235 0.3906 -0.217 0.53425 -0.1445 0.14385 -0.32365 0.21575 -0.5375 0.21575 -0.21365 0 -0.39135 -0.0719 -0.533 -0.21575 -0.14165 -0.14365 -0.2125 -0.32175 -0.2125 -0.53425v-10.675Z" stroke-width="0.5"></path>
          </svg>
        </button>
      </div>
      </div>
    </div>  
  </div>
</div>